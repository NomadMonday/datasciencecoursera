else
{
paste0(n, ".csv")
}
}
nobs <- data.frame()
for(i in id)
{
x <- read.csv(paste(directory, getFileName(i), sep = "\\"))
nobs <- rbind(i, table(!is.na(x$sulfate) & !is.na(x$nitrate))[["TRUE"]])
}
colnames(nobs) <- c("id", "nobs")
nobs
}
complete("specdata", 1)
complete <- function(directory, id = 1:332)
{
getFileName <- function(n)
{
if(n < 10)
{
paste0("00", n, ".csv")
}
else if(n < 100)
{
paste0("0", n, ".csv")
}
else
{
paste0(n, ".csv")
}
}
nobs <- data.frame()
for(i in id)
{
x <- read.csv(paste(directory, getFileName(i), sep = "\\"))
nobs <- rbind(i, table(!is.na(x$sulfate) & !is.na(x$nitrate))[["TRUE"]])
}
#colnames(nobs) <- c("id", "nobs")
nobs
}
complete("specdata", 1)
complete <- function(directory, id = 1:332)
{
getFileName <- function(n)
{
if(n < 10)
{
paste0("00", n, ".csv")
}
else if(n < 100)
{
paste0("0", n, ".csv")
}
else
{
paste0(n, ".csv")
}
}
nobs <- data.frame()
for(i in id)
{
x <- read.csv(paste(directory, getFileName(i), sep = "\\"))
nobs <- rbind(c(i, table(!is.na(x$sulfate) & !is.na(x$nitrate))[["TRUE"]]))
}
colnames(nobs) <- c("id", "nobs")
nobs
}
complete("specdata", 1)
my_data
complete <- function(directory, id = 1:332)
{
getFileName <- function(n)
{
if(n < 10)
{
paste0("00", n, ".csv")
}
else if(n < 100)
{
paste0("0", n, ".csv")
}
else
{
paste0(n, ".csv")
}
}
nobs <- data.frame()
for(i in id)
{
x <- read.csv(paste(directory, getFileName(i), sep = "\\"))
nobs <- rbind(c(i, table(!is.na(x$sulfate) & !is.na(x$nitrate))[["TRUE"]]))
}
names(nobs) <- c("id", "nobs")
nobs
}
complete("specdata", 1)
?names
nobs
complete <- function(directory, id = 1:332)
{
getFileName <- function(n)
{
if(n < 10)
{
paste0("00", n, ".csv")
}
else if(n < 100)
{
paste0("0", n, ".csv")
}
else
{
paste0(n, ".csv")
}
}
nobs <- data.frame()
for(i in id)
{
x <- read.csv(paste(directory, getFileName(i), sep = "\\"))
nobs <- rbind(c(i, table(!is.na(x$sulfate) & !is.na(x$nitrate))[["TRUE"]]))
}
names(nobs) <- c("id", "nobs")
class(nobs)
}
complete("specdata", 1)
remove(nobs)
nobs <- data.frame()
nobs <- rbind(c(i, table(!is.na(x$sulfate) & !is.na(x$nitrate))[["TRUE"]]))
nobs <- rbind(c(1, table(!is.na(x$sulfate) & !is.na(x$nitrate))[["TRUE"]]))
class(nobs)
nobs <- data.frame()
class nobs
class(nobs)
nobs <- data.frame(ncol(2))
nobs
nobs <- data.frame(ncol = 2)
nobs
complete <- function(directory, id = 1:332)
{
getFileName <- function(n)
{
if(n < 10)
{
paste0("00", n, ".csv")
}
else if(n < 100)
{
paste0("0", n, ".csv")
}
else
{
paste0(n, ".csv")
}
}
nobs <- data.frame()
for(i in id)
{
x <- read.csv(paste(directory, getFileName(i), sep = "\\"))
nobs <- rbind(c(i, table(!is.na(x$sulfate) & !is.na(x$nitrate))[["TRUE"]]))
}
names(nobs) <- c("id", "nobs")
as.data.frame(nobs)
}
complete("specdata", 1)
complete <- function(directory, id = 1:332)
{
getFileName <- function(n)
{
if(n < 10)
{
paste0("00", n, ".csv")
}
else if(n < 100)
{
paste0("0", n, ".csv")
}
else
{
paste0(n, ".csv")
}
}
nobs <- data.frame()
for(i in id)
{
x <- read.csv(paste(directory, getFileName(i), sep = "\\"))
nobs <- rbind(c(i, table(!is.na(x$sulfate) & !is.na(x$nitrate))[["TRUE"]]))
}
colnames(nobs) <- c("id", "nobs")
as.data.frame(nobs)
}
complete("specdata", 1)
complete <- function(directory, id = 1:332)
{
getFileName <- function(n)
{
if(n < 10)
{
paste0("00", n, ".csv")
}
else if(n < 100)
{
paste0("0", n, ".csv")
}
else
{
paste0(n, ".csv")
}
}
nobs <- data.frame()
for(i in id)
{
x <- read.csv(paste(directory, getFileName(i), sep = "\\"))
nobs <- rbind(nobs, c(i, table(!is.na(x$sulfate) & !is.na(x$nitrate))[["TRUE"]]))
}
colnames(nobs) <- c("id", "nobs")
as.data.frame(nobs)
}
complete("specdata", 1)
complete("specdata", c(2, 4, 8, 10, 12))
source("complete.R")
complete("specdata", 1)
complete("specdata", c(2, 4, 8, 10, 12))
complete("specdata", 30:25)
complete("specdata", 3)
?cor
cplt <- complete("specdata")
source("pollutantmean.R")
pollutantmean("specdata", "sufate")
pollutantmean("specdata", "sulfate")
pollutantmean("specdata", "nitrate")
cplt <- complete("specdata")
cplt <- complete("specdata", 300:332)
cplt <- complete("specdata", 200:332)
cplt <- complete("specdata", 200:300)
cplt <- complete("specdata", 250:300)
cplt <- complete("specdata", 275:300)
cplt <- complete("specdata", 290:300)
cplt <- complete("specdata", 295:300)
cplt <- complete("specdata", 290:295)
cplt <- complete("specdata", 290:294)
cplt <- complete("specdata", 290:293)
cplt <- complete("specdata", 290:292)
cplt <- complete("specdata", 290:291)
cplt <- complete("specdata", 290:290)
cplt <- complete("specdata", 291)
table(!is.na(x$sulfate) & !is.na(x$nitrate))
x<-read.csv("specdata/291.csv")
table(!is.na(x$sulfate) & !is.na(x$nitrate))
t <- table(!is.na(x$sulfate) & !is.na(x$nitrate))
colnames(t)
names(t)
complete <- function(directory, id = 1:332)
{
getFileName <- function(n)
{
if(n < 10)
{
paste0("00", n, ".csv")
}
else if(n < 100)
{
paste0("0", n, ".csv")
}
else
{
paste0(n, ".csv")
}
}
nobs <- data.frame()
for(i in id)
{
x <- read.csv(paste(directory, getFileName(i), sep = "\\"))
t <- table(!is.na(x$sulfate) & !is.na(x$nitrate))
if("TRUE" %in% names(t))
{
nobs <- rbind(nobs, c(i, t[["TRUE"]]))
}
else
{
nobs <- rbind(nobs, c(i, 0))
}
}
colnames(nobs) <- c("id", "nobs")
as.data.frame(nobs)
}
complete("specdata", 291)
source("complete.R")
complete("specdata", 1)
complete("specdata", c(2, 4, 8, 10, 12))
complete("specdata", 30:25)
complete("specdata", 3)
complete("specdata")
cplt <- complete("specdata")
z <- cplt$nobs > 0
cplt[nobs > 0]
cplt[["id"]["nobs">0]]
cplt[["id"]["nobs"]>0]
cplt[["id"]][nobs > 0]
cplt[["id"]]["nobs"" > 0]
cplt[["id"]]["nobs" > 0]
cplt[1,]
cplt[,1]
cplt[z,1]
cplt[cplt$nobs>0,1]
corr <- function(directory, threshold = 0)
{
getFileName <- function(n)
{
if(n < 10)
{
paste0("00", n, ".csv")
}
else if(n < 100)
{
paste0("0", n, ".csv")
}
else
{
paste0(n, ".csv")
}
}
cplt <- complete(directory)
index <- cplt[cplt$nobs > 0, 1]
result <- numeric()
if(length(index) == 0)
{
result
}
else
{
for(i in index)
{
x <- read.csv(paste(directory, getFileName(i), sep = "\\"))
result <- c(result, corr(x$nitrate, x$sulfate))
}
result
}
}
source("corr.R")
source("complete.R")
cr <- corr("specdata", 150)
head(cr)
cr <- corr("specdata", 150)
source("corr.R")
source("complete.R")
cr <- corr("specdata", 150)
head(cr)
corr <- function(directory, threshold = 0)
{
getFileName <- function(n)
{
if(n < 10)
{
paste0("00", n, ".csv")
}
else if(n < 100)
{
paste0("0", n, ".csv")
}
else
{
paste0(n, ".csv")
}
}
cplt <- complete(directory)
# index <- cplt[cplt$nobs > 0, 1]
# result <- numeric()
#
# if(length(index) == 0)
# {
# 	result
# }
# else
# {
# 	for(i in index)
# 	{
# 		x <- read.csv(paste(directory, getFileName(i), sep = "\\"))
# 		result <- c(result, corr(x$nitrate, x$sulfate))
# 	}
# 	result
# }
}
corr("specdata", 150)
index <- cplt[cplt$nobs > 0, 1]
index
corr <- function(directory, threshold = 0)
{
getFileName <- function(n)
{
if(n < 10)
{
paste0("00", n, ".csv")
}
else if(n < 100)
{
paste0("0", n, ".csv")
}
else
{
paste0(n, ".csv")
}
}
cplt <- complete(directory)
index <- cplt[cplt$nobs > 0, 1]
result <- numeric()
if(length(index) == 0)
{
result
}
else
{
for(i in index)
{
x <- read.csv(paste(directory, getFileName(i), sep = "\\"))
#result <- c(result, corr(x$nitrate, x$sulfate))
}
result
}
}
cr <- corr("specdata", 150)
View(x)
corr(x$nitrate, x$sulfate)
source("corr.R")
source("complete.R")
cr <- corr("specdata", 150)
head(cr)
source("corr.R")
source("complete.R")
cr <- corr("specdata", 150)
head(cr)
cor(x$nitrate, x$sulfate)
x$nitrate
x <- read.csv("specdata/001.csv")
x$nitrate
cor(x$nitrate, x$sulfate)
source("corr.R")
source("complete.R")
cr <- corr("specdata", 150)
head(cr)
cr <- corr("specdata", 150)
head(cr)
summary(cr)
source("corr.R")
source("complete.R")
cr <- corr("specdata", 150)
head(cr)
source("corr.R")
source("complete.R")
cr <- corr("specdata", 150)
head(cr)
source("corr.R")
source("complete.R")
cr <- corr("specdata", 150)
head(cr)
cr <- corr("specdata", 400)
head(cr)
cr <- corr("specdata", 5000)
head(cr)
source("corr.R")
source("complete.R")
cr <- corr("specdata", 150)
head(cr)
cr <- corr("specdata", 5000)
head(cr)
cplt <- complete("specdata")
source("corr.R")
source("complete.R")
cr <- corr("specdata", 150)
head(cr)
summary(cr)
cr <- corr("specdata", 400)
head(cr)
summary(cr)
cr <- corr("specdata", 5000)
head(cr)
summary(cr)
length(cr)
cr <- corr("specdata")
summary(cr)
length(cr)
source("pollutantmean.R")
source("complete.R")
source("corr.R")
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean("specdata", "nitrate", 70:72)
pollutantmean("specdata", "sulfate", 34)
pollutantmean("specdata", "nitrate")
cc <- complete("specdata", c(6, 10, 20, 34, 100, 200, 310))
print(cc$nobs)
cc <- complete("specdata", 54)
print(cc$nobs)
set.seed(42)
cc <- complete("specdata", 332:1)
use <- sample(332, 10)
print(cc[use, "nobs"])
cr <- corr("specdata")
cr <- sort(cr)
set.seed(868)
out <- round(cr[sample(length(cr), 5)], 4)
print(out)
cr <- corr("specdata", 129)
cr <- sort(cr)
n <- length(cr)
set.seed(197)
out <- c(n, round(cr[sample(n, 5)], 4))
print(out)
cr <- corr("specdata", 2000)
n <- length(cr)
cr <- corr("specdata", 1000)
cr <- sort(cr)
print(c(n, round(cr, 4)))
